type: grid
cards:
  - type: conditional
    conditions:
      - condition: state
        entity: "12"
        state: "12"
    card:
      type: vertical-stack
      cards:
        - type: heading
          icon: mdi:information
          heading: Статусная строка
          heading_style: title
          card_mod:
            style: |
              ha-card {
                   background: rgba(200,100,0) !important;
                 }
    grid_options:
      columns: 6
      rows: auto
  - type: custom:vertical-stack-in-card
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            icon: mdi:power
            icon_color: |-
              {% if is_state(config.entity, 'on')%} red
              {% else %} 1
              {% endif %}
            tap_action:
              action: toggle
            hold_action:
              action: none
            double_tap_action:
              action: none
            entity: fan.ac_switch
            card_mod:
              style: |
                ha-card {
                  opacity: 0.4 }   
                ha-card:hover {
                  opacity: 1 }     
                ha-card:active {
                  scale: 0.9;
                }  
          - type: conditional
            conditions:
              - condition: user
                users:
                  - 1a1897c1b5d24702ae00645a47e23e99
            chip:
              type: template
              tap_action:
                action: more-info
              hold_action:
                action: none
              double_tap_action:
                action: none
              entity: sensor.vremia_raboty_konditsionera
              content: |
                {% set x = states(config.entity)|float(0) %}
                {% set y = (x % 1  * 60)|int(0)%}
                {% if x | int > 0 %}
                  {{ x | int }} ч.
                {% else %}
                {% endif %}
                {% if y | int > 0 %}
                {{ y}} мин
                {% endif %}
              icon: mdi:fan-clock
              card_mod:
                style: |
                  ha-card {
                    opacity: 0.4 }   
                  ha-card:hover {
                    opacity: 1 }     
                  ha-card:active {
                    scale: 0.9;
                  }  
          - type: spacer
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            icon: mdi:thermometer
            entity: sensor.ble_temperature_a4c1387e6730
            content: >-
              {{states('sensor.ble_temperature_a4c1387e6730')| replace (".",",")
              }}°
            card_mod:
              style: |
                ha-card {
                  opacity: 0.4 }   
                ha-card:hover {
                  opacity: 1 }     
                ha-card:active {
                  scale: 0.9;
                }  
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            entity: sensor.ble_humidity_a4c1387e6730
            content: "{{states(config.entity)| replace (\".\",\",\") }}%"
            icon: mdi:water
            card_mod:
              style: |
                ha-card {
                  opacity: 0.4 }   
                ha-card:hover {
                  opacity: 1 }     
                ha-card:active {
                  scale: 0.9;
                }  
          - type: conditional
            conditions:
              - condition: state
                entity: climate.ac_fan
                state_not: "off"
            chip:
              type: template
              entity: climate.ac_fan
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
              icon: |
                {% if states(config.entity) != 'off' %}
                  {% if is_state_attr(config.entity, 'fan_mode', 'auto') %} mdi:fan-auto
                  {% elif is_state_attr(config.entity, 'fan_mode', 'low') %} mdi:fan-speed-1
                  {% elif is_state_attr(config.entity, 'fan_mode', 'mid') %} mdi:fan-speed-2
                  {% elif is_state_attr(config.entity, 'fan_mode', 'high') %} mdi:fan-speed-3
                  {% else %} 
                  {% endif %}
                {% else %} 
                {% endif %}
              card_mod:
                style: |
                  ha-card {
                    opacity: 0.4 }   
          - type: template
            icon: mdi:information
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            entity: climate.ac_fan
            card_mod:
              style: |
                ha-card {
                  opacity: 0.4 }   
                ha-card:hover {
                  opacity: 1 }     
                ha-card:active {
                  scale: 0.9;
                }  
        alignment: start
        card_mod:
          style: |
            {% set top = 7 %}
            {% set chip_height = 48 %}
            {% include 'title_chips_scrollable.jinja' %}
    card_mod:
      style: |
        {% set top = 100 %}
        {% include 'fixed_settings.jinja' %}
    grid_options:
      columns: 6
      rows: auto
  - type: conditional
    conditions:
      - condition: state
        entity: "12"
        state: "12"
    card:
      type: vertical-stack
      cards:
        - type: heading
          icon: mdi:view-dashboard
          heading: Карта
          heading_style: title
          card_mod:
            style: |
              ha-card {
                   background: rgba(200,0,100) !important;
                 }
    grid_options:
      columns: 6
      rows: auto
  - type: custom:vertical-stack-in-card
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-template-card
            primary: |+

            secondary: ""
            icon: ""
            picture: ""
            badge_icon: ""
            badge_color: ""
            layout: vertical
            icon_color: ""
            tap_action:
              action: none
            double_tap_action:
              action: none
            fill_container: true
            hold_action:
              action: none
            card_mod:
              style: |
                {% set domain = '' %}
                {% set file = '/local/cards_img/ac2.png' %}
                {% set entity = 'climate.ac_fan' %}
                {% set state_off = 'off' %}

                {% include 'cover_card_cover.jinja' %}
          - type: custom:mushroom-template-card
            primary: Кондиционер
            secondary: |-
              {% if is_state(config.entity, 'off') %} Выключен
              {% else %}
                {% if states(config.entity) in ['unknown', 'unavailable', 'none']  %}
                {% elif is_state(config.entity, 'cool') %} Охлаждение
                {% elif is_state(config.entity, 'heat') %} Обогрев
                {% elif is_state(config.entity, 'auto') %} Авторежим
                {% elif is_state(config.entity, 'on') %} Включен
                {% endif %} 
              {% endif %} • {{state_attr(config.entity, 'temperature')}}°
            icon: ""
            entity: climate.ac_fan
            picture: ""
            badge_icon: ""
            badge_color: ""
            layout: vertical
            icon_color: ""
            tap_action:
              action: none
            double_tap_action:
              action: none
            fill_container: true
            hold_action:
              action: none
            card_mod:
              style:
                .: |
                  {% include 'cover_device_name.jinja' %}
                mushroom-state-info$: |
                  .container {
                   --card-secondary-font-size: 15px;
                   --card-primary-font-size: 20px;
                   --card-secondary-color: rgba(var(--rgb-primary-text-color), 0.6);
                  }
          - type: custom:mushroom-chips-card
            chips:
              - type: conditional
                conditions:
                  - condition: state
                    entity: fan.ac_switch
                    state: "off"
                chip:
                  type: spacer
              - type: conditional
                conditions:
                  - condition: state
                    entity: fan.ac_switch
                    state: "on"
                chip:
                  type: template
                  tap_action:
                    action: perform-action
                    perform_action: climate.set_hvac_mode
                    target:
                      entity_id: climate.ac_fan
                    data:
                      hvac_mode: cool
                  icon: mdi:snowflake
                  icon_color: |-
                    {% if is_state(config.entity, 'cool')%} blue
                    {% else %} '1'
                    {% endif %}
                  entity: climate.ac_fan
                  hold_action:
                    action: none
                  double_tap_action:
                    action: none
                  card_mod:
                    style:
                      .: |
                        {% set hover = 'true' %}
                        {% set stating = 'true' %}
                        {% set state_on = 'cool' %}
                        {% include 'chip_settings_style.jinja' %}
              - type: template
                entity: fan.ac_switch
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon: mdi:power
                icon_color: |2-
                    {% if is_state('fan.ac_switch', 'on')%} 
                       {% if is_state('climate.ac_fan','cool')%} blue
                       {% elif is_state('climate.ac_fan','heat')%} red
                       {% elif is_state('climate.ac_fan','on')%} indigo
                       {% endif %}
                    {% else %} 1
                    {% endif %}
                card_mod:
                  style:
                    .: >
                      {% set scale = '1' %}

                      {% set hover = 'true' %}

                      {% set stating = 'true' %}

                      {% set state_on = 'on' %}

                      {% set color = 'rgba(120,120,120,0.2)' %}

                      {% set hover_color_off = 'rgba(120,120,120,0.3)
                      !important' %}

                      {% include 'chip_settings_style.jinja' %}
              - type: conditional
                conditions:
                  - condition: state
                    entity: fan.ac_switch
                    state: "on"
                chip:
                  type: template
                  tap_action:
                    action: perform-action
                    perform_action: climate.set_hvac_mode
                    target:
                      entity_id: climate.ac_fan
                    data:
                      hvac_mode: cool
                  icon: mdi:fire
                  icon_color: |-
                    {% if is_state(config.entity, 'heat')%} red
                    {% else %} '1'
                    {% endif %}
                  entity: climate.ac_fan
                  hold_action:
                    action: none
                  double_tap_action:
                    action: none
                  card_mod:
                    style:
                      .: |
                        {% set hover = 'true' %}
                        {% set stating = 'true' %}
                        {% set state_on = 'heat' %}
                        {% include 'chip_settings_style.jinja' %}
              - type: conditional
                conditions:
                  - condition: state
                    entity: fan.ac_switch
                    state: "off"
                chip:
                  type: spacer
            alignment: justify
            card_mod:
              style:
                .: |
                  {% include 'chip_buttons_big.jinja' %}
          - type: conditional
            conditions:
              - condition: state
                entity: fan.ac_switch
                state: "on"
            card:
              type: custom:mushroom-climate-card
              entity: climate.ac_fan
              show_temperature_control: true
              primary_info: none
              secondary_info: none
              icon_type: none
              tap_action:
                action: none
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  mushroom-media-player-volume-control$: |
                    mushroom-slider {
                      --main-color: #505050 !important;
                      --bg-color: #50505055 !important;
                      --control-height: 20px !important;

                    }
                  .: >
                    ha-card {
                      background: transparent !important;
                      opacity: 100%;
                      margin-top: 0px;
                      border-width: 0px;
                      margin: 20px 0px 20px;
                    }



                    @media (pointer: fine) {
                      ha-card:hover {
                        background: {{(states('input_text.s_card_background_off_hover')) }};
                    }

                    @media (min-width: 1150px) {

                    ha-card {
                      margin: 20px {{space|default(150)}}px 20px  ;
                    }

                    @media (min-aspect-ratio: 1.001/1) and (max-aspect-ratio:
                    1000/1) and (max-width: 2300px), (min-aspect-ratio: 2.1/1) {

                      ha-card {
                      margin: 20px {{space|default(0)}}px 20px  ;
                      }
                    }
        grid_options:
          columns: 24
          rows: auto
    grid_options:
      columns: 6
      rows: auto
    card_mod:
      style: |
        {% set top = 160 %}
        {% include 'fixed_settings.jinja' %}
  - type: conditional
    conditions:
      - condition: state
        entity: "12"
        state: "12"
    card:
      type: vertical-stack
      cards:
        - type: heading
          icon: mdi:air-conditioner
          heading: 0.3.7
          heading_style: title
          card_mod:
            style: |
              ha-card {
                   background: rgba(100,0,200) !important;
                 }
    grid_options:
      columns: 6
      rows: auto
  - type: markdown
    content: |+
      ** 0.3.0.2 **

      1. Исправлены иконки

      ** 0.3.0.1 **

      1. Исправлены иконки

      ** 0.3.0 **

      1. Новый дизайн



    visibility:
      - condition: state
        entity: "1233"
        state: "12121"
    text_only: true
  - type: vertical-stack
    cards:
      - type: conditional
        conditions:
          - condition: state
            entity: "12"
            state: "12"
        card:
          type: vertical-stack
          cards:
            - type: heading
              icon: mdi:air-conditioner
              heading: Бар
              heading_style: title
              card_mod:
                style: |
                  ha-card {
                       background: rgba(100,100,60) !important;
                     }
        grid_options:
          columns: 6
          rows: auto
      - type: custom:button-card
        name: null
        styles:
          card:
            - height: 100px
            - background: transparent
            - border: none
        action: none
      - type: custom:mushroom-chips-card
        chips:
          - type: back
            card_mod:
              style: |
                ha-card:hover {
                  --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                  }
          - type: template
            tap_action:
              action: toggle
            icon: mdi:thermometer-auto
            icon_color: |-
              {% if is_state(config.entity, 'off')%} "1"
              {% else %} blue
              {% endif %}
            entity: automation.konditsioner_vkl_vykl_temp
            hold_action:
              action: none
            double_tap_action:
              action: none
            card_mod:
              style:
                .: |
                  {% set hover = 'true' %}
                  {% set stating = 'true' %}
                  {% set state_on = 'on' %}
                  {% include 'chip_settings_style.jinja' %}
          - type: conditional
            conditions:
              - condition: state
                entity: switch.ac_switch
                state: "on"
            chip:
              type: template
              content: ""
              tap_action:
                action: none
              icon: ph:line-vertical
              icon_color: 150,150,150,0.5
              entity: sensor.ac_fan_mode
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  .: |
                    {% set hover = 'false' %}
                    {% set stating = 'false' %}
                    {% include 'chip_settings_style.jinja' %}
          - type: conditional
            conditions:
              - condition: state
                entity: switch.ac_switch
                state: "on"
            chip:
              type: template
              tap_action:
                action: perform-action
                perform_action: climate.set_fan_mode
                target:
                  entity_id: climate.ac_fan
                data:
                  fan_mode: auto
              icon: mdi:fan-auto
              icon_color: >-
                {% if is_state(config.entity, 'auto') and
                states('climate.ac_fan') == 'cool'%} blue

                {% elif is_state(config.entity, 'auto') and
                states('climate.ac_fan') == 'heat'%} red

                {% else %} 1

                {% endif %}
              entity: sensor.ac_fan_mode
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  .: |
                    {% set hover = 'true' %}
                    {% set stating = 'true' %}
                    {% set state_on = 'auto' %}
                    {% include 'chip_settings_style.jinja' %}
          - type: conditional
            conditions:
              - condition: state
                entity: switch.ac_switch
                state: "on"
            chip:
              type: template
              tap_action:
                action: perform-action
                perform_action: climate.set_fan_mode
                target:
                  entity_id: climate.ac_fan
                data:
                  fan_mode: low
              icon: mdi:fan-speed-1
              icon_color: >-
                {% if is_state(config.entity, 'low') and
                states('climate.ac_fan') == 'cool'%} blue

                {% elif is_state(config.entity, 'low') and
                states('climate.ac_fan') == 'heat'%} red

                {% endif %}
              entity: sensor.ac_fan_mode
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  .: |
                    {% set hover = 'true' %}
                    {% set stating = 'true' %}
                    {% set state_on = 'low' %}
                    {% include 'chip_settings_style.jinja' %}
          - type: conditional
            conditions:
              - condition: state
                entity: switch.ac_switch
                state: "on"
            chip:
              type: template
              tap_action:
                action: perform-action
                perform_action: climate.set_fan_mode
                target:
                  entity_id: climate.ac_fan
                data:
                  fan_mode: mid
              icon: mdi:fan-speed-2
              icon_color: >-
                {% if is_state(config.entity, 'mid') and
                states('climate.ac_fan') == 'cool'%} blue

                {% elif is_state(config.entity, 'mid') and
                states('climate.ac_fan') == 'heat'%} red

                {% endif %}
              entity: sensor.ac_fan_mode
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  .: |
                    {% set hover = 'true' %}
                    {% set stating = 'true' %}
                    {% set state_on = 'mid' %}
                    {% include 'chip_settings_style.jinja' %}
          - type: conditional
            conditions:
              - condition: state
                entity: switch.ac_switch
                state: "on"
            chip:
              type: template
              tap_action:
                action: perform-action
                perform_action: climate.set_fan_mode
                target:
                  entity_id: climate.ac_fan
                data:
                  fan_mode: high
              icon: mdi:fan-speed-3
              icon_color: >-
                {% if is_state(config.entity, 'high') and
                states('climate.ac_fan') == 'cool'%} blue

                {% elif is_state(config.entity, 'high') and
                states('climate.ac_fan') == 'heat'%} red

                {% endif %}
              entity: sensor.ac_fan_mode
              hold_action:
                action: none
              double_tap_action:
                action: none
              card_mod:
                style:
                  .: |
                    {% set hover = 'true' %}
                    {% set stating = 'true' %}
                    {% set state_on = 'high' %}
                    {% include 'chip_settings_style.jinja' %}
        alignment: center
        card_mod:
          style:
            mushroom-template-chip:nth-child(1)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            mushroom-template-chip:nth-child(2)$: |
              {% set opacity = 0.1 %}
              {% include 'shadow_chip_icon.jinja' %}
            mushroom-template-chip:nth-child(3)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            mushroom-template-chip:nth-child(4)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            mushroom-template-chip:nth-child(5)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            mushroom-template-chip:nth-child(6)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            .: |

              {% set max_width =150 %}
              {% set chip_height = 40 %}
              {% set chip_padding = 5 %}
              {% set icon_size = 30 %}
              {% set chip_spacing = 20 %}
              {% include 'fixed_bottom_bar.jinja' %}



















               
