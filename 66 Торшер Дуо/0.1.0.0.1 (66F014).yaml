type: grid
cards:
  - type: custom:mushroom-chips-card
    chips:
      - type: template
        icon: mdi:power
        icon_color: |2-
                {%if is_state(config.entity,'on')%} red
                {%else %} disabled
                {% endif %}
        entity: light.torsher_2
        tap_action:
          action: toggle
        hold_action:
          action: none
        double_tap_action:
          action: none
        card_mod:
          style: |
            ha-card:hover {
              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
              scale: 1.1;}
      - type: spacer
      - type: conditional
        conditions:
          - condition: state
            entity: light.yeelight_colorb_0xed432a3
            state: "on"
        chip:
          type: template
          tap_action:
            action: more-info
          hold_action:
            action: none
          double_tap_action:
            action: none
          icon: mdi:circle
          icon_color: "{{state_attr(config.entity, 'rgb_color')}}"
          entity: light.yeelight_colorb_0xed432a3
          card_mod:
            style: |
              ha-card:hover {
                --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                scale: 1.1;}
      - type: conditional
        conditions:
          - condition: state
            entity: light.yeelight_colorb_0x1b11995d
            state: "on"
        chip:
          type: template
          tap_action:
            action: more-info
          hold_action:
            action: none
          double_tap_action:
            action: none
          icon: mdi:circle
          icon_color: "{{state_attr(config.entity, 'rgb_color')}}"
          entity: light.yeelight_colorb_0x1b11995d
          card_mod:
            style: |
              ha-card:hover {
                --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                scale: 1.1;}
      - type: template
        icon: mdi:information
        icon_color: disabled
        tap_action:
          action: more-info
        hold_action:
          action: none
        double_tap_action:
          action: none
        entity: light.torsher_2
        card_mod:
          style: |
            ha-card:hover {
              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
              scale: 1.1;}
    alignment: start
    card_mod:
      style: |
        ha-card {
          opacity:1000%;
          --chip-height: 50px;
          --chip-background: none;
          --chip-border-radius: 50px;

          background-color: transparent !important;
          }
        ha-card:hover {
           opacity: 100%; }
        ha-card > .chip-container {
          flex-wrap: nowrap;
          overflow-x: scroll;
          overflow-y: hidden;
          --chip-spacing: 0px;
          --chip-height: 45px;
          --chip-font-weight: bolder; 
          --primary-tet-color: white;
          margin-top: 5px;
          margin-left: 0px;  
          margin-right: 0px;
          margin-bottom: 0px; 
          padding-bottom: 0px;
        }
        ha-card > .chip-container > * {
          flex-shrink: 0;
        }
  - type: vertical-stack
    cards:
      - type: custom:mushroom-template-card
        primary: |+

        secondary: ""
        icon: ""
        picture: ""
        badge_icon: ""
        badge_color: ""
        layout: vertical
        icon_color: ""
        tap_action:
          action: more-info
        double_tap_action:
          action: none
        fill_container: true
        card_mod:
          style: |
            ha-card:before {
              transform: translate3d(0,0,0);
              -webkit-transform: translate3d(0,0,0);
              content: "";
                    {%if is_state('light.yeelight_colorb_0x1b11995d','on') and
              is_state('light.yeelight_colorb_0xed432a3','on') %}
                {%if state_attr('light.yeelight_colorb_0x1b11995d','rgb_color') == state_attr('light.yeelight_colorb_0xed432a3','rgb_color') %}
                       background: linear-gradient(180deg, rgba({{state_attr('light.yeelight_colorb_0x1b11995d','rgb_color')|replace ("(","")|replace (")","")}},0.8), rgba({{state_attr('light.yeelight_colorb_0xed432a3','rgb_color')|replace ("(","")|replace (")","")}},0.5) 100%);
                {% else %} 
                       background: linear-gradient(180deg, rgba({{state_attr('light.yeelight_colorb_0x1b11995d','rgb_color')|replace ("(","")|replace (")","")}},0.8), rgba({{state_attr('light.yeelight_colorb_0xed432a3','rgb_color')|replace ("(","")|replace (")","")}},0.8) 100%);
                {% endif%}
              {%elif is_state('light.yeelight_colorb_0x1b11995d','on') and
              is_state('light.yeelight_colorb_0xed432a3','off') %}
                 background: linear-gradient(180deg, rgba({{state_attr('light.yeelight_colorb_0x1b11995d','rgb_color')|replace ("(","")|replace (")","")}},0.8), rgba(40,40,40,0.5) 90%);
              {%elif is_state('light.yeelight_colorb_0x1b11995d','off') and
              is_state('light.yeelight_colorb_0xed432a3','on') %}
                 background: linear-gradient(180deg, rgba(40,40,40,0.5), rgba({{state_attr('light.yeelight_colorb_0xed432a3','rgb_color')|replace ("(","")|replace (")","")}},0.8) 150%);
              {% else %}
                 background: linear-gradient(180deg, rgba(90,90,90,0.1), rgba(0,0,0,1) 100%);
              {% endif %}
              
              background-size: cover;
              margin: 0px 0px -20px 0px;
              aspect-ratio: 1 / 1; 
              border-radius: 30px;
              }
            ha-card {
              border-radius: 30px; 
              border: 2px outset rgba(0,0,0,0);}
              border-width: 0px;
      - type: custom:mushroom-template-card
        primary: Торшер Дуо
        secondary: "{{state_translated(config.entity)}}"
        icon: ""
        entity: light.torsher_2
        picture: ""
        badge_icon: ""
        badge_color: ""
        layout: vertical
        icon_color: ""
        tap_action:
          action: none
        double_tap_action:
          action: none
        fill_container: true
        card_mod:
          style:
            .: |
              ha-card { 
                margin-top: 0px;
                margin-left: 0px;
                margin-right: 0px;
                background: none !important ;
                }
            mushroom-state-info$: |
              .container {
               --card-secondary-font-size: 15px;
               --card-primary-font-size: 20px;
               --card-secondary-color: rgba(var(--rgb-primary-text-color), 0.6);
              }
      - type: custom:stack-in-card
        cards:
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: |+

                secondary: ""
                icon: ""
                picture: ""
                badge_icon: ""
                badge_color: ""
                layout: vertical
                icon_color: ""
                tap_action:
                  action: more-info
                double_tap_action:
                  action: none
                fill_container: true
                card_mod:
                  style: |
                    ha-card:before {
                      transform: translate3d(0,0,0);
                      -webkit-transform: translate3d(0,0,0);
                      content: "";
                            {%if is_state('light.yeelight_colorb_0x1b11995d','on') and
                      is_state('light.yeelight_colorb_0xed432a3','on') %}
                        {%if state_attr('light.yeelight_colorb_0x1b11995d','rgb_color') == state_attr('light.yeelight_colorb_0xed432a3','rgb_color') %}
                               background: linear-gradient(180deg, rgba({{state_attr('light.yeelight_colorb_0x1b11995d','rgb_color')|replace ("(","")|replace (")","")}},0.8), rgba({{state_attr('light.yeelight_colorb_0xed432a3','rgb_color')|replace ("(","")|replace (")","")}},0.5) 100%);
                        {% else %} 
                               background: linear-gradient(180deg, rgba({{state_attr('light.yeelight_colorb_0x1b11995d','rgb_color')|replace ("(","")|replace (")","")}},0.8), rgba({{state_attr('light.yeelight_colorb_0xed432a3','rgb_color')|replace ("(","")|replace (")","")}},0.8) 100%);
                        {% endif%}
                      {%elif is_state('light.yeelight_colorb_0x1b11995d','on') and
                      is_state('light.yeelight_colorb_0xed432a3','off') %}
                         background: linear-gradient(180deg, rgba({{state_attr('light.yeelight_colorb_0x1b11995d','rgb_color')|replace ("(","")|replace (")","")}},0.8), rgba(40,40,40,0.5) 90%);
                      {%elif is_state('light.yeelight_colorb_0x1b11995d','off') and
                      is_state('light.yeelight_colorb_0xed432a3','on') %}
                         background: linear-gradient(180deg, rgba(40,40,40,0.5), rgba({{state_attr('light.yeelight_colorb_0xed432a3','rgb_color')|replace ("(","")|replace (")","")}},0.8) 150%);
                      {% else %}
                         background: linear-gradient(180deg, rgba(90,90,90,0.1), rgba(0,0,0,1) 100%);
                      {% endif %}
                      
                      background-size: cover;
                      margin: 0px 0px -20px 0px;
                      filter: blur(0px) saturate(100%) brightness(50%);
                      aspect-ratio: 1 / 1; 
                      border-radius: 30px;
                      }
                    ha-card {
                      border-radius: 30px; 
                      border: 2px outset rgba(0,0,0,0);}
                      border-width: 0px;
            card_mod:
              style: |
                ha-card {
                  border-radius: 35px; 
                     }
          - type: custom:mushroom-chips-card
            chips:
              - type: spacer
              - type: template
                entity: light.torsher_2
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon: mdi:power
                icon_color: >-
                  {%if is_state('light.torsher_2','on')%}
                  {{state_attr(config.entity,'rgb_color')}}

                  {%else %} '1'

                  {% endif %}
                card_mod:
                  style: |
                    ha-card {
                      margin: -30px 0px 0px 0px;
                         --chip-border-radius: 50%;
                         --chip-height: 125px;
                         --chip-background:             
                            {%if is_state('light.torsher_2','on')%} rgba({{states('input_text.player_card_button_active_color')}})
                            {%else %} rgba({{states('input_text.player_card_button_color')}});
                            {% endif %};
                      weight: 0px; }
                    ha-card:hover {
                      --chip-background:             
                         {%if is_state('light.torsher_2','on')%} rgba({{states('input_text.player_card_button_hover_active_color')}});  
                         {%else %} rgba({{states('input_text.player_card_button_hover_color')}})
                         {% endif %};
                      scale: 1.1;}
              - type: spacer
            alignment: center
            card_mod:
              style: |
                ha-card {
                     margin: 20px 12px 20px 12px;
                      opacity: 100%;
                      --chip-background: rgba({{states('input_text.player_card_button_color')}});
                      --chip-height: 65px;
                      --chip-border-radius: 50%;
                      --chip-spacing: 25px;
                      position: absolute !important;
                      left: 0px;
                      right: 0px;
                      top: 195px !important;
                      background-color: none !important; }
                ha-card:hover {
                   opacity: 100%;
                }
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                icon: ""
                picture: local/images/torsh/red.png
                tap_action:
                  action: perform-action
                  perform_action: light.turn_on
                  target:
                    entity_id: light.torsher_2
                  data:
                    rgb_color:
                      - 255
                      - 0
                      - 0
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon_color: ""
                card_mod:
                  style: |
                    ha-card:hover {
                      --chip-background: rgba(50,50,50,1);
                      scale: 1.1;}
              - type: template
                icon: ""
                picture: local/images/torsh/r-b.png
                tap_action:
                  action: perform-action
                  perform_action: script.1689533656304
                  target: {}
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon_color: ""
                card_mod:
                  style: |
                    ha-card:hover {
                      --chip-background: rgba(50,50,50,1);
                      scale: 1.1;}
              - type: template
                icon: ""
                picture: local/images/torsh/w-b.png
                tap_action:
                  action: perform-action
                  perform_action: script.1689533780753
                  target: {}
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon_color: ""
                card_mod:
                  style: |
                    ha-card:hover {
                      --chip-background: rgba(50,50,50,1);
                      scale: 1.1;}
              - type: template
                icon: ""
                picture: local/images/torsh/g-b.png
                tap_action:
                  action: perform-action
                  perform_action: script.1689533851034
                  target: {}
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon_color: ""
                card_mod:
                  style: |
                    ha-card:hover {
                      --chip-background: rgba(50,50,50,1);
                      scale: 1.1;}
              - type: template
                icon: ""
                tap_action:
                  action: perform-action
                  perform_action: script.1689533926442
                  target: {}
                hold_action:
                  action: none
                picture: local/images/torsh/y-o.png
                icon_color: ""
                card_mod:
                  style: |
                    ha-card:hover {
                      --chip-background: rgba(50,50,50,1);
                      scale: 1.1;}
              - type: template
                icon: ""
                tap_action:
                  action: perform-action
                  perform_action: script.1689841764449
                  target: {}
                hold_action:
                  action: none
                picture: local/images/torsh/y-p.png
                icon_color: ""
                card_mod:
                  style: |
                    ha-card:hover {
                      --chip-background: rgba(50,50,50,1);
                      scale: 1.1;}
              - type: template
                icon: ""
                tap_action:
                  action: perform-action
                  perform_action: script.1689533996451
                  target: {}
                hold_action:
                  action: none
                picture: local/images/torsh/c-w.png
                icon_color: ""
                card_mod:
                  style: |
                    ha-card:hover {
                      --chip-background: rgba(50,50,50,1);
                      scale: 1.1;}
              - type: template
                icon: ""
                tap_action:
                  action: perform-action
                  perform_action: light.turn_on
                  target:
                    entity_id: light.torsher_2
                  data:
                    effect: Slowdown
                hold_action:
                  action: none
                picture: local/images/torsh/slowdown.png
                icon_color: ""
                card_mod:
                  style: |
                    ha-card:hover {
                      --chip-background: rgba(50,50,50,1);
                      scale: 1.1;}
            alignment: justify
            card_mod:
              style: |
                ha-card {
                     margin: 20px 12px 20px 12px;
                      opacity: 100%;
                      --chip-height: 50px;
                      --chip-background: rgba({{states('input_text.player_card_button_color')}});
                      --chip-border-radius: 50%;
                      --chip-spacing: 0px;
                      position: absolute !important;
                      left: 0px;
                      right: 0px;
                      top: 418px !important;
                      background-color: transparent !important;
                      }
                ha-card:hover {
                   opacity: 100%;
        card_mod:
          style: |
            ha-card {
              opacity:0%;
              --chip-height: 50px;
              --chip-background: rgba({{states('input_text.player_card_button_color')}});
              --chip-border-radius: 30px;
              position: absolute !important;
              border-radius: 30px;
              top: 0px !important;
              left: 0px;
              right: 0px;
              background-color: transparent !important;
              }
            ha-card:hover {
               opacity: 100%; }
      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:mushroom-light-card
            entity: light.yeelight_colorb_0x1b11995d
            use_light_color: true
            name: Верхний свет
            show_color_control: true
            layout: horizontal
            icon: hue:bulb-filament-alt-hung
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            double_tap_action:
              action: none
            card_mod:
              style: |
                ha-card {  
                  --control-border-radius: 150px;
                  background-color: rgba(255,255,255,0) }};

                }
          - type: custom:mushroom-light-card
            entity: light.yeelight_colorb_0xed432a3
            use_light_color: true
            name: Нижний свет
            layout: horizontal
            show_color_control: true
            icon: hue:bulb-filament-alt
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            double_tap_action:
              action: none
            card_mod:
              style: |
                ha-card {  
                  --control-border-radius: 150px;
                  background-color: rgba(255,255,255,0) }};

                }
          - type: custom:mushroom-light-card
            entity: light.torsher_2
            use_light_color: true
            name: Один цвет
            show_brightness_control: false
            layout: horizontal
            show_color_temp_control: false
            show_color_control: true
            icon: hue:bollard
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            card_mod:
              style: |
                ha-card {  
                  --control-border-radius: 150px;
                  background-color: rgba(255,255,255,0) }};

                }
          - type: custom:mushroom-light-card
            entity: light.torsher_2
            use_light_color: false
            name: Яркость
            show_brightness_control: true
            layout: horizontal
            icon: mdi:brightness-4
            tap_action:
              action: none
            hold_action:
              action: none
            double_tap_action:
              action: none
            card_mod:
              style: |
                ha-card {  
                  --control-border-radius: 150px;
                  background-color: rgba(255,255,255,0) }};

                }
        card_mod:
          style: |
            ha-card {
              opacity:0%;
              --chip-height: 50px;
              --chip-background: rgba({{states('input_text.player_card_button_color')}});
              --chip-border-radius: 30px;
              border-radius: 30px;
              top: 0px !important;
              left: 0px;
              right: 0px;
              background-color: transparent !important;
              }
            ha-card:hover {
               opacity: 100%; }
    card_mod:
      style: |
        ha-card:before {
          transform: translate3d(0,0,0);
          -webkit-transform: translate3d(0,0,0);
          content: "";
          position: absolute;
          height: 100%;
          width: 100%;

          background: transparent !important;
          filter: blur(0px) saturate(200%);
          background-size: 100% 100%;
        }
        ha-card {

        background-color: transparent !important;
        padding: 0px;
          transform: translate3d(0,0,0);
          -webkit-transform: translate3d(0,0,0);

        }
  - type: heading
    icon: mdi:speaker
    heading_style: title
    heading: 1.0.0.1
    visibility:
      - condition: state
        entity: sensor.balkon_window_l_battery
        state: "890"
